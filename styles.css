:root{
  /* Design tokens */
  --page-width: 1440px;
  --header-h: 72px;

  /* Spacing scale: 8/16/24/32 */
  --space-1: 8px;
  --space-2: 16px;
  --space-3: 24px;
  --space-4: 32px;

  /* Colors */
  --bg: #141414;
  --surface: #1f1f1f;
  --text: #e5e5e5;
  --muted: #b3b3b3;
  --red: #e50914;
  --overlay: linear-gradient(180deg, rgba(0,0,0,0.65) 10%, rgba(0,0,0,0.2) 60%, rgba(0,0,0,0.85) 100%);

  /* Typography */
  --fz-sm: 12px;
  --fz-base: 14px;
  --fz-lg: 18px;
  --fz-xl: 28px;
  --fz-2xl: 40px;

  /* Misc */
  --radius: 5px;
  --shadow-1: 0 6px 24px rgba(0,0,0,0.45);

  /* Hero image (replace if desired) */
  --hero-image: url("./images/main_poster.jpg");
}

*{ box-sizing: border-box; }
html, body { height: 100%; }
body{
  margin: 0;
  background: var(--bg);
  color: var(--text);
  font: 400 var(--fz-base)/1.45 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, Apple SD Gothic Neo, Noto Sans KR, sans-serif;
  -webkit-font-smoothing: antialiased;
}

img{ max-width: 100%; display: block; }
ul{ list-style: none; margin: 0; padding: 0; }
a{ color: inherit; text-decoration: none; }

/* Accessibility helpers */
.skip-link{
  position: absolute;
  left: -9999px;
  top: -9999px;
  background: #fff;
  color: #000;
  padding: var(--space-1) var(--space-2);
  border-radius: var(--radius);
}
.skip-link:focus{
  left: var(--space-2);
  top: var(--space-2);
}

.sr-only{
  position: absolute !important;
  height: 1px; width: 1px;
  overflow: hidden; clip: rect(1px,1px,1px,1px);
  white-space: nowrap;
}

:focus-visible{
  outline: 2px solid var(--red);
  outline-offset: 2px;
}

/* Page frame */
.page{
  width: var(--page-width);
  margin: 0 auto;
  background: transparent;
}

/* Header (fixed) */
.header{
  position: fixed;
  z-index: 100;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  width: var(--page-width);
  height: var(--header-h);
  display: flex;
  align-items: center;
  gap: var(--space-3);
  padding: 0 var(--space-3);
  background: rgba(20,20,20,0.78);
  backdrop-filter: saturate(140%) blur(8px);
  border-bottom: 1px solid rgba(255,255,255,0.08);
}

.brand{
  font-weight: 900;
  letter-spacing: 0.5px;
  color: var(--red);
  font-size: 24px;
}
.nav{ flex: 1; }
.nav__list{
  display: flex;
  gap: var(--space-2);
}
.nav__list a{
  padding: 6px 8px;
  border-radius: 6px;
  color: var(--text);
}
.nav__list a:hover{ background: rgba(255,255,255,0.08); }

.search input{
  height: 36px;
  min-width: 220px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.15);
  background: rgba(255,255,255,0.06);
  color: var(--text);
  padding: 0 12px;
}

/* Main */
.main{
  padding-top: var(--header-h);
  isolation: isolate; /* ensure hero overlay layers correctly */
}

/* Hero */
.hero{
  position: relative;
  min-height: 520px;
  display: grid;
  align-items: center;
  background-image: var(--hero-image);
  background-size: cover;
  background-position: center;
}
.hero::before{
  content: "";
  position: absolute;
  inset: 0;
  background: var(--overlay);
  z-index: 0;
}
.hero__content{
  position: relative;
  z-index: 1;
  max-width: 720px;
  padding: var(--space-4) var(--space-3);
}
.eyebrow{
  display: inline-block;
  padding: 4px 8px;
  border-radius: 999px;
  background: rgba(255,255,255,0.15);
  font-size: var(--fz-sm);
}
.hero__title{ 
  font-size: var(--fz-2xl);
  margin: var(--space-2) 0 var(--space-2);
  letter-spacing: 0.2px;
}
.hero__desc{
  color: var(--muted);
  margin: 0 0 var(--space-3);
}
.hero__actions{ display: flex; gap: var(--space-2); }
.btn{
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 10px 16px;
  border-radius: 8px;
  font-weight: 700;
  border: 1px solid transparent;
  transition: transform .12s ease, background .2s ease, border-color .2s ease;
  box-shadow: var(--shadow-1);
}
.btn-primary{
  background: #fff;
  color: #000;
}
.btn-primary:hover{ transform: translateY(-1px); }
.btn-secondary{
  background: rgba(255,255,255,0.12);
  border-color: rgba(255,255,255,0.22);
  color: var(--text);
}
.btn-secondary:hover{ background: rgba(255,255,255,0.18); transform: translateY(-1px); }

/* Sections */
.category{
  padding: var(--space-4) var(--space-3);
}
.section-title{
  font-size: var(--fz-xl);
  margin: 0 0 var(--space-2);
}

/* Card grid rows (6 per row) */
.card-row{
  display: grid;
  grid-template-columns: repeat(6, 1fr);
  gap: var(--space-2);
}

.card{ }
.card__link{
  display: grid;
  gap: 8px;
}
.card__img{
  width: 100%;
  aspect-ratio: 16 / 9;
  object-fit: cover;
  border-radius: var(--radius);
  box-shadow: var(--shadow-1);
  transform: translateZ(0);
  transition: transform .18s ease, box-shadow .18s ease;
}
.card__link:hover .card__img,
.card__link:focus-visible .card__img{
  transform: scale(1.05);
  box-shadow: 0 16px 40px rgba(0,0,0,.6);
}
.card__title{
  font-size: var(--fz-sm);
  color: var(--muted);
  padding-left: 2px;
}

/* Footer */
.footer{
  padding: var(--space-4) var(--space-3) var(--space-4);
  color: var(--muted);
  border-top: 1px solid rgba(255,255,255,0.08);
}
.footer__small{
  margin: 0 0 var(--space-2);
}
.footer__links{
  display: flex;
  gap: var(--space-2);
  flex-wrap: wrap;
}
.footer__links a{ color: var(--muted); }
.footer__links a:hover{ color: var(--text); }

/* New actions cluster on the right */
.actions{
  display: flex;
  align-items: center;
  gap: var(--space-2);
}
.icon-btn{
  display: inline-grid;
  place-items: center;
  width: 36px;
  height: 36px;
  border: 0;
  background: transparent;
  color: var(--text);
  border-radius: 8px;
  transition: background .15s ease, filter .15s ease;
}
.icon-btn:hover{ background: rgba(255,255,255,0.08); }
.icon{ width: 22px; height: 22px; fill: currentColor; display:block; }

.action-link{ color: var(--text); font-size: var(--fz-base); opacity: .9; }
.action-link:hover{ opacity: 1; }

/* Bell badge */
.notif{ position: relative; }
.badge{
  position: absolute;
  top: -4px;
  right: -2px;
  min-width: 18px;
  height: 18px;
  padding: 0 5px;
  border-radius: 999px;
  background: var(--red);
  color: #fff;
  font-size: 10px;
  line-height: 18px;
  text-align: center;
  border: 2px solid rgba(20,20,20,0.9); /* 배경과 분리되는 외곽선 */
  font-weight: 800;
}

/* Profile */
.profile{
  display: inline-flex;
  align-items: center;
  gap: 6px;
  height: 36px;
  padding: 0 6px;
  border: 0;
  background: transparent;
  color: var(--text);
  border-radius: 8px;
  transition: background .15s ease;
}
.profile:hover{ background: rgba(255,255,255,0.08); }
.profile img{
  width: 28px;
  height: 28px;
  border-radius: 6px;
  display: block;
  object-fit: cover;
}
.caret{ width: 16px; height: 16px; fill: currentColor; opacity: .8; }

.rankline{
  display:inline-flex; align-items:center; gap:10px;
  padding:6px 8px;
  background: rgba(0,0,0,0.18);
  border-radius: 12px;
  box-shadow: 0 4px 14px rgba(0,0,0,.25);
}
.badge-t10{
  display:grid; grid-template-rows:auto auto; justify-items:center; align-content:center;
  width:32px; height:32px; border-radius:8px;
  background:var(--red); color:#fff; font-weight:900;
  box-shadow: 0 6px 18px rgba(229,9,20,.45);
  line-height:1; letter-spacing:.2px;
}
.badge-t10__top{ font-size:10px; margin-top:3px; }
.badge-t10__num{ font-size:14px; margin-top:1px; }
.rankline__label{ font-size: var(--fz-lg); }
.rankline__em{ font-weight:800; }

/* 숫자(왼쪽) + 포스터(오른쪽) TOP10 */
.top10-side-row{
  display:grid;
  grid-template-columns: repeat(5, 1fr); /* 5개 카드 */
  gap: var(--space-4);
  align-items:end;
}
.t10{
  display:grid;
  grid-template-columns: 1fr auto; /* 숫자 영역 / 포스터 */
  column-gap: var(--space-3);
  align-items:end;
}
.t10__num{
  font-weight:600;
  font-size: clamp(180px, 13vw, 300px);
  line-height:.8;
  color: transparent;
  -webkit-text-stroke: 8px rgba(255,255,255,0.18); /* 외곽선 숫자 */
  text-shadow: 0 2px 0 rgba(0,0,0,0.25);
  align-self:end;
}
.t10__poster{ position:relative; display:block; left: -60px;}
.poster{ width:220px; border-radius:8px; box-shadow: var(--shadow-1); }
.poster-2x3{ aspect-ratio: 2 / 3; object-fit: cover; }

/* 포스터 하단 리본(재사용) */
/* 기존 .ribbons 규칙을 이걸로 교체 */
.t10__poster .ribbons{
  position: absolute;
  left: 80%;
  top: 85%;
  transform: translate(-50%, -50%);

  display: flex;
  flex-direction: column;
  align-items: stretch;                 /* ← 자식이 컨테이너 너비 채움 */
  gap: 0px;                             /* 배지 간 간격 */

  width: clamp(160px, 78%, 240px);      /* ← 길이(가로폭) 늘림 */
  box-sizing: border-box;
}

/* 배지가 컨테이너(.ribbons) 너비를 꽉 채우도록 */
.t10__poster .pill{
  display: block;                       /* inline → block */
  width: 60%;
  text-align: center;

  padding: 3px 3px;                    /* 약간 더 두툼하게 */
  border-radius: 8px;
  font-size: 12px;
  font-weight: 800;
  box-shadow: 0 6px 16px rgba(0,0,0,.35);
}

/* 색상 변형은 그대로 사용 */
.pill--red{ background: var(--red); color:#fff; }
.pill--white{ background:#fff; color:#000; }

/* 카드/포스터에 겹칠 코너 배지 */
.card__link, .t10__poster { position: relative; }  /* 기준점 */

/* 코너 배지: 모서리에 딱 붙이기 */
.corner-badge{
  position: absolute;
  top: 0;              /* ← 바로 모서리 */
  right: 0;            /* ← 바로 모서리 */
  width: 34px;
  height: 34px;
  display: grid;
  grid-template-rows: auto auto;
  justify-items: center;
  align-content: center;
  background: var(--red);
  color: #fff;
  font-weight: 900;
  line-height: 1;
  letter-spacing: .2px;
  /* 바깥 모서리는 컨테이너 둥근 모서리에 의해 잘려서 정확히 맞음 */
  /* 원하면 안쪽 모서리만 둥글게: */
  border-top-right-radius: 0;
  border-bottom-left-radius: 8px;

  box-shadow: 0 8px 16px rgba(0,0,0,.35);
  pointer-events: none;
  z-index: 2;
}
.corner-badge__top{ font-size: 9px; margin-top: 3px; }
.corner-badge__num{ font-size: 12px; margin-top: 1px; }

.corner-nflx{
  position: absolute;
  top: 0;          /* 모서리에 딱 맞게 */
  left: 0;
  width: 40px;     /* 필요시 26~34px로 조정 */
  height: 40px;
  display: grid;
  place-items: center;
  z-index: 2;
  pointer-events: none;             /* 클릭 방해 X */
}
.corner-nflx img{
  width: 80%;                       /* 패딩 효과 */
  height: 80%;
  object-fit: contain;
  filter: drop-shadow(0 2px 4px rgba(0,0,0,.35)); /* 배경에 묻히지 않게 */
}

.cta-bar{
  position: absolute;
  left: 50%;
  bottom: 8px;                  /* 이미지의 '밑에' 붙임 */
  transform: translateX(-50%);   /* 가로 중앙 정렬 */
  display: inline-flex;
  align-items: center;
  border-radius: 3px;           /* 한 덩어리처럼 보이게 */
  overflow: hidden;              /* 모서리 깔끔하게 */
  box-shadow: 0 10px 24px rgba(0,0,0,.45);
  z-index: 2;                    /* 이미지 위로 */
}

.cta-chip{
  padding: 5px 5px;             /* 높이/가로 여백 */
  font-size: 12px;
  font-weight: 800;
  line-height: 1;
  white-space: nowrap;
}

.cta-chip--red{   background: var(--red); color: #fff; }
.cta-chip--white{ background: #fff;      color: #000; }

.overlay-tags{
  position: absolute;
  left: 50%;
  bottom: 8px;                   /* 하단에 딱 붙음 */
  transform: translateX(-50%);   /* 가로 중앙 */
  display: flex;
  gap: 6px;
  z-index: 2;                    /* 이미지 위로 */
}

.overlay-tags .pill{
  display: inline-block;
  padding: 5px 5px;
  border-radius: 3px;
  font-size: 12px;
  font-weight: 800;
  line-height: 1;
  box-shadow: 0 8px 18px rgba(0,0,0,.45);
}

.pill--red{ background: var(--red); color:#fff; }

.t10__poster .ribbons .pill{
  display: block;
  width: 60%;
  text-align: center;
  padding: 3px 3px;
  border-radius: 8px;
  font-size: 12px;
  font-weight: 800;
  box-shadow: 0 6px 16px rgba(0,0,0,.35);
}

/* 겹치는 하단 중앙 라벨 */
.overlay-tags{
  position: absolute;
  left: 50%;
  bottom: 8px;
  transform: translateX(-50%);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0px;
  z-index: 2;
}

/* 리본 규칙의 폭 제한을 무시하고 자연 폭 사용 */
.overlay-tags .pill{
  width: auto;
  display: inline-flex;
  white-space: nowrap;
  padding: 5px 5px;
  border-radius: 3px;
  font-size: 12px;
  font-weight: 800;
  line-height: 1;
  box-shadow: 0 8px 18px rgba(0,0,0,.45);
}

/* 겹치는 하단 중앙 라벨 */
.t10 .overlay-tags{
  position: absolute;
  left: 50%;
  bottom: 0px;
  transform: translateX(-50%);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0px;
  z-index: 2;
}

.brand--logo{
  display: inline-flex;
  align-items: center;
  /* 혹시 텍스트가 남아 있어도 보이지 않게 */
  font-size: 0;
  line-height: 0;
  color: inherit; /* 기존 빨강 글자색 무효화 */
}

.brand--logo img{
  height: 150px;    /* 24~36px 사이로 취향대로 조절 */
  width: auto;
  display: block;
}

/* Anchor */
.menu {
  position: relative;
}

/* The popover panel (hidden by default) */
.popover {
  position: absolute;
  top: calc(100% + 10px);   /* a little gap under the bell */
  right: 0;
  width: 360px;
  max-width: min(90vw, 360px);
  background: rgba(20,20,20,0.98);
  color: #fff;
  border-radius: 10px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.6);
  padding: 12px;
  z-index: 1000;

  opacity: 0;
  visibility: hidden;
  transform: translateY(-6px);
  transition: opacity .18s ease, transform .18s ease, visibility 0s linear .18s;
  pointer-events: none;  /* don’t steal hover when hidden */
}

/* Little arrow */
.popover::before {
  content: "";
  position: absolute;
  top: -8px;
  right: 14px;           /* align with bell */
  border: 8px solid transparent;
  border-bottom-color: rgba(20,20,20,0.98);
}

/* Show on mouse hover OR keyboard focus */
.menu:hover .popover,
.menu:focus-within .popover {
  opacity: 1;
  visibility: visible;
  transform: translateY(0);
  transition-delay: 0s;
  pointer-events: auto;
}

/* Simple content layout */
.popover__item {
  display: grid;
  grid-template-columns: 72px 1fr;
  gap: 12px;
  align-items: center;
}

.popover__thumb {
  width: 72px;
  height: 72px;
  object-fit: cover;
  border-radius: 6px;
}

.popover__title {
  margin: 0 0 2px;
  font-weight: 700;
  line-height: 1.2;
}

.popover__subtitle {
  margin: 0 0 4px;
  opacity: .9;
}

.popover__meta {
  margin: 0;
  font-size: .9rem;
  opacity: .7;
}

/* Profile dropdown tweaks (reuses .menu + .popover show/hide rules) */
.profile-menu { position: relative; }
.profile-popover{
  width: 280px;                   /* a bit narrower than the bell popover */
  padding: 10px;
}

.profile-list{ list-style:none; margin:0; padding:0; display:grid; gap:6px; }
.profile-item{
  display:flex; align-items:center; gap:10px;
  padding:8px; border-radius:8px;
  cursor:pointer;
}
.profile-item:hover{ background: rgba(255,255,255,0.06); }

.avatar.small{
  width:28px; height:28px; border-radius:6px; object-fit:cover; display:block;
}

.profile-sep{
  border:0; height:1px; background: rgba(255,255,255,0.12);
  margin:6px 0;
}

/* Optional: show a little caret aligned to the profile button */
.profile-popover::before{
  right: 24px;   /* line up with the profile button */
}
